{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "select-list",
  "title": "Select List",
  "description": "A single-select dropdown list component.",
  "registryDependencies": [
    "button",
    "popover",
    "command",
    "scroll-area",
    "separator"
  ],
  "files": [
    {
      "path": "registry/helisa/ui/select-list.tsx",
      "content": "\"use client\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nimport { CheckIcon, ChevronDownIcon } from \"lucide-react\";\r\nimport * as React from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n} from \"@/components/ui/command\";\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\n\r\ntype Props<T> = {\r\n  data?: T[];\r\n  getOptionValue: (item: T) => string;\r\n  getOptionLabel: (item: T) => string;\r\n\r\n  // Valor seleccionado actual\r\n  value?: string | null;\r\n\r\n  // Callbacks\r\n  onChange?: (value: string | null, item: T | null) => void;\r\n\r\n  // Configuración de UI\r\n  placeholder?: string;\r\n  searchPlaceholder?: string;\r\n  emptyMessage?: string;\r\n  clearLabel?: string;\r\n  closeLabel?: string;\r\n\r\n  // Estados\r\n  disabled?: boolean;\r\n\r\n  // Testing\r\n  testId?: string;\r\n\r\n  // Clases personalizadas\r\n  className?: string;\r\n  popoverClassName?: string;\r\n};\r\n\r\nfunction SelectList<T>({\r\n  data = [],\r\n  getOptionValue,\r\n  getOptionLabel,\r\n  value,\r\n  onChange,\r\n  placeholder = \"Seleccione una opción\",\r\n  searchPlaceholder = \"Buscar...\",\r\n  emptyMessage = \"No se encontraron resultados.\",\r\n  clearLabel = \"Limpiar\",\r\n  closeLabel = \"Cerrar\",\r\n  disabled = false,\r\n  testId,\r\n  popoverClassName,\r\n}: Props<T>) {\r\n  const [selectedValue, setSelectedValue] = React.useState<string | null>(\r\n    value ?? null,\r\n  );\r\n  const [isPopoverOpen, setIsPopoverOpen] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    setSelectedValue(value ?? null);\r\n  }, [value]);\r\n\r\n  const handleSelect = (newValue: string | null) => {\r\n    setSelectedValue(newValue);\r\n    const selectedItem = newValue\r\n      ? (data.find((item) => getOptionValue(item) === newValue) ?? null)\r\n      : null;\r\n\r\n    onChange?.(newValue, selectedItem);\r\n    setIsPopoverOpen(false);\r\n  };\r\n\r\n  const handleClear = () => {\r\n    handleSelect(null);\r\n  };\r\n\r\n  const getSelectedLabel = () => {\r\n    if (selectedValue == null) return null;\r\n    const selected = data.find(\r\n      (item) => getOptionValue(item) === selectedValue,\r\n    );\r\n    return selected ? getOptionLabel(selected) : null;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Popover open={isPopoverOpen} onOpenChange={setIsPopoverOpen}>\r\n        <PopoverTrigger asChild>\r\n          <Button\r\n            variant=\"outline\"\r\n            role=\"combobox\"\r\n            aria-expanded={isPopoverOpen}\r\n            className=\"w-full justify-between\"\r\n            disabled={disabled}\r\n            data-test-id={testId || \"select-list-button\"}\r\n          >\r\n            <span\r\n              className=\"flex-1 text-left truncate pr-6\"\r\n              title={getSelectedLabel() || undefined}\r\n            >\r\n              {getSelectedLabel() || (\r\n                <span className=\"text-muted-foreground\">{placeholder}</span>\r\n              )}\r\n            </span>\r\n            <ChevronDownIcon className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n          </Button>\r\n        </PopoverTrigger>\r\n\r\n        <PopoverContent\r\n          className={cn(\r\n            \"w-[var(--radix-popover-trigger-width)] p-0\",\r\n            popoverClassName,\r\n          )}\r\n          align=\"start\"\r\n        >\r\n          <Command>\r\n            <CommandInput placeholder={searchPlaceholder} />\r\n            <CommandList className=\"max-h-[unset] overflow-y-hidden\">\r\n              {data.length ? (\r\n                <>\r\n                  <CommandEmpty>{emptyMessage}</CommandEmpty>\r\n\r\n                  <CommandGroup className=\"max-h-80 overflow-y-auto\">\r\n                    {data.map((item, index) => {\r\n                      const itemValue = getOptionValue(item);\r\n                      const itemLabel = getOptionLabel(item);\r\n                      const isSelected = selectedValue === itemValue;\r\n\r\n                      return (\r\n                        <CommandItem\r\n                          key={`${itemValue}-${index}`}\r\n                          onSelect={() => handleSelect(itemValue)}\r\n                          className=\"cursor-pointer flex items-start gap-2 py-2\"\r\n                        >\r\n                          <div\r\n                            className={cn(\r\n                              \"mt-1 flex h-4 w-4 shrink-0 items-center justify-center\",\r\n                              isSelected ? \"text-primary\" : \"invisible\",\r\n                            )}\r\n                          >\r\n                            <CheckIcon className=\"w-4 h-4\" />\r\n                          </div>\r\n                          <span className=\"whitespace-normal leading-relaxed text-sm\">\r\n                            {itemLabel}\r\n                          </span>\r\n                        </CommandItem>\r\n                      );\r\n                    })}\r\n                  </CommandGroup>\r\n\r\n                  <CommandSeparator />\r\n\r\n                  <CommandGroup>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      {selectedValue != null && (\r\n                        <>\r\n                          <CommandItem\r\n                            onSelect={handleClear}\r\n                            className=\"justify-center flex-1 cursor-pointer\"\r\n                          >\r\n                            {clearLabel}\r\n                          </CommandItem>\r\n                          <Separator\r\n                            orientation=\"vertical\"\r\n                            className=\"flex h-full mx-2 min-h-6\"\r\n                          />\r\n                        </>\r\n                      )}\r\n                      <CommandItem\r\n                        onSelect={() => setIsPopoverOpen(false)}\r\n                        className=\"justify-center flex-1 max-w-full cursor-pointer\"\r\n                      >\r\n                        {closeLabel}\r\n                      </CommandItem>\r\n                    </div>\r\n                  </CommandGroup>\r\n                </>\r\n              ) : (\r\n                <div className=\"p-4 flex items-center justify-center\">\r\n                  <span className=\"whitespace-normal leading-relaxed text-sm\">\r\n                    No hay opciones disponibles.\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </CommandList>\r\n          </Command>\r\n        </PopoverContent>\r\n      </Popover>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SelectList;\r\n",
      "type": "registry:ui",
      "target": "components/helisa/ui/select-list.tsx"
    }
  ],
  "type": "registry:ui"
}
