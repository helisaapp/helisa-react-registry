{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "select-list",
  "type": "registry:ui",
  "title": "Select List",
  "description": "A single-select dropdown list component.",
  "registryDependencies": [
    "button",
    "popover",
    "command",
    "scroll-area",
    "separator"
  ],
  "files": [
    {
      "path": "registry/helisa/ui/select-list.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\n\nimport { CheckIcon, ChevronDownIcon } from \"lucide-react\";\nimport * as React from \"react\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n  CommandSeparator,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { Separator } from \"@/components/ui/separator\";\n\ntype Props<T> = {\n  data?: T[];\n  getOptionValue: (item: T) => string;\n  getOptionLabel: (item: T) => string;\n\n  // Valor seleccionado actual\n  value?: string | null;\n\n  // Callbacks\n  onChange?: (value: string | null, item: T | null) => void;\n\n  // Configuración de UI\n  placeholder?: string;\n  searchPlaceholder?: string;\n  emptyMessage?: string;\n  clearLabel?: string;\n  closeLabel?: string;\n\n  // Estados\n  disabled?: boolean;\n\n  // Testing\n  testId?: string;\n\n  // Clases personalizadas\n  className?: string;\n  popoverClassName?: string;\n};\n\nfunction SelectList<T>({\n  data = [],\n  getOptionValue,\n  getOptionLabel,\n  value,\n  onChange,\n  placeholder = \"Seleccione una opción\",\n  searchPlaceholder = \"Buscar...\",\n  emptyMessage = \"No se encontraron resultados.\",\n  clearLabel = \"Limpiar\",\n  closeLabel = \"Cerrar\",\n  disabled = false,\n  testId,\n  popoverClassName,\n}: Props<T>) {\n  const [selectedValue, setSelectedValue] = React.useState<string | null>(\n    value ?? null,\n  );\n  const [isPopoverOpen, setIsPopoverOpen] = React.useState(false);\n\n  React.useEffect(() => {\n    setSelectedValue(value ?? null);\n  }, [value]);\n\n  const handleSelect = (newValue: string | null) => {\n    setSelectedValue(newValue);\n    const selectedItem = newValue\n      ? (data.find((item) => getOptionValue(item) === newValue) ?? null)\n      : null;\n\n    onChange?.(newValue, selectedItem);\n    setIsPopoverOpen(false);\n  };\n\n  const handleClear = () => {\n    handleSelect(null);\n  };\n\n  const getSelectedLabel = () => {\n    if (selectedValue == null) return null;\n    const selected = data.find(\n      (item) => getOptionValue(item) === selectedValue,\n    );\n    return selected ? getOptionLabel(selected) : null;\n  };\n\n  return (\n    <>\n      <Popover open={isPopoverOpen} onOpenChange={setIsPopoverOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"outline\"\n            role=\"combobox\"\n            aria-expanded={isPopoverOpen}\n            className=\"w-full justify-between\"\n            disabled={disabled}\n            data-test-id={testId || \"select-list-button\"}\n          >\n            <span\n              className=\"flex-1 text-left truncate pr-6\"\n              title={getSelectedLabel() || undefined}\n            >\n              {getSelectedLabel() || (\n                <span className=\"text-muted-foreground\">{placeholder}</span>\n              )}\n            </span>\n            <ChevronDownIcon className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n          </Button>\n        </PopoverTrigger>\n\n        <PopoverContent\n          className={cn(\n            \"w-(--radix-popover-trigger-width) p-0\",\n            popoverClassName,\n          )}\n          align=\"start\"\n        >\n          <Command>\n            <CommandInput placeholder={searchPlaceholder} />\n            <CommandList className=\"max-h-[unset] overflow-y-hidden\">\n              {data.length ? (\n                <>\n                  <CommandEmpty>{emptyMessage}</CommandEmpty>\n\n                  <CommandGroup className=\"max-h-[20rem] overflow-y-auto\">\n                    {data.map((item, index) => {\n                      const itemValue = getOptionValue(item);\n                      const itemLabel = getOptionLabel(item);\n                      const isSelected = selectedValue === itemValue;\n\n                      return (\n                        <CommandItem\n                          key={`${itemValue}-${index}`}\n                          onSelect={() => handleSelect(itemValue)}\n                          className=\"cursor-pointer flex items-start gap-2 py-2\"\n                        >\n                          <div\n                            className={cn(\n                              \"mt-1 flex h-4 w-4 shrink-0 items-center justify-center\",\n                              isSelected ? \"text-primary\" : \"invisible\",\n                            )}\n                          >\n                            <CheckIcon className=\"w-4 h-4\" />\n                          </div>\n                          <span className=\"whitespace-normal leading-relaxed text-sm\">\n                            {itemLabel}\n                          </span>\n                        </CommandItem>\n                      );\n                    })}\n                  </CommandGroup>\n\n                  <CommandSeparator />\n\n                  <CommandGroup>\n                    <div className=\"flex items-center justify-between\">\n                      {selectedValue != null && (\n                        <>\n                          <CommandItem\n                            onSelect={handleClear}\n                            className=\"justify-center flex-1 cursor-pointer\"\n                          >\n                            {clearLabel}\n                          </CommandItem>\n                          <Separator\n                            orientation=\"vertical\"\n                            className=\"flex h-full mx-2 min-h-6\"\n                          />\n                        </>\n                      )}\n                      <CommandItem\n                        onSelect={() => setIsPopoverOpen(false)}\n                        className=\"justify-center flex-1 max-w-full cursor-pointer\"\n                      >\n                        {closeLabel}\n                      </CommandItem>\n                    </div>\n                  </CommandGroup>\n                </>\n              ) : (\n                <div className=\"p-4 flex items-center justify-center\">\n                  <span className=\"whitespace-normal leading-relaxed text-sm\">\n                    No hay opciones disponibles.\n                  </span>\n                </div>\n              )}\n            </CommandList>\n          </Command>\n        </PopoverContent>\n      </Popover>\n    </>\n  );\n}\n\nexport default SelectList;\n",
      "type": "registry:ui",
      "target": "components/helisa/ui/select-list.tsx"
    }
  ]
}
