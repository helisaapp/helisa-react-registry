{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-field",
  "type": "registry:ui",
  "title": "Form Field",
  "description": "A component for form field layout and validation.",
  "dependencies": ["react-hook-form"],
  "registryDependencies": [
    "label",
    "input",
    "textarea",
    "select",
    "switch",
    "checkbox",
    "field",
    "https://raw.githubusercontent.com/helisaapp/helisa-react-registry/refs/heads/main/public/r/required-mark.json"
  ],
  "files": [
    {
      "path": "registry/helisa/ui/form-field.tsx",
      "content": "\"use client\";\r\n\r\nimport {\r\n  Field,\r\n  FieldContent,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldLabel,\r\n} from \"@/components/ui/field\";\r\nimport { ReactNode } from \"react\";\r\nimport {\r\n  Controller,\r\n  ControllerProps,\r\n  FieldPath,\r\n  FieldValues,\r\n} from \"react-hook-form\";\r\nimport RequiredMark from \"./required-mark\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\n\r\ntype FormControlProps<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n  TTransformedValues = TFieldValues,\r\n> = {\r\n  name: TName;\r\n  label: ReactNode;\r\n  description?: ReactNode;\r\n  /**\r\n   * Indica si la descripción se muestra después del campo de entrada (Input, Select, etc.)\r\n   */\r\n  isDescriptionAfter?: boolean;\r\n\r\n  /** Indica si el campo es obligatorio, para mostrar la marca de requerido */\r\n  isRequired?: boolean;\r\n  control: ControllerProps<TFieldValues, TName, TTransformedValues>[\"control\"];\r\n};\r\n\r\ntype FormBaseProps<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n  TTransformedValues = TFieldValues,\r\n> = FormControlProps<TFieldValues, TName, TTransformedValues> & {\r\n  horizontal?: boolean;\r\n  controlFirst?: boolean;\r\n  children: (\r\n    field: Parameters<\r\n      ControllerProps<TFieldValues, TName, TTransformedValues>[\"render\"]\r\n    >[0][\"field\"] & {\r\n      \"aria-invalid\": boolean;\r\n      id: string;\r\n    },\r\n  ) => ReactNode;\r\n};\r\n\r\ntype FormControlFunc<\r\n  ExtraProps extends Record<string, unknown> = Record<never, never>,\r\n> = <\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n  TTransformedValues = TFieldValues,\r\n>(\r\n  props: FormControlProps<TFieldValues, TName, TTransformedValues> & ExtraProps,\r\n) => ReactNode;\r\n\r\nexport function FormBase<\r\n  TFieldValues extends FieldValues = FieldValues,\r\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\r\n  TTransformedValues = TFieldValues,\r\n>({\r\n  children,\r\n  control,\r\n  label,\r\n  name,\r\n  description,\r\n  isDescriptionAfter,\r\n  controlFirst,\r\n  horizontal,\r\n  isRequired,\r\n}: FormBaseProps<TFieldValues, TName, TTransformedValues>) {\r\n  return (\r\n    <Controller\r\n      control={control}\r\n      name={name}\r\n      render={({ field, fieldState }) => {\r\n        const labelElement = (\r\n          <>\r\n            <FieldLabel htmlFor={field.name}>\r\n              {label}\r\n              {isRequired && <RequiredMark />}\r\n            </FieldLabel>\r\n            {!isDescriptionAfter && description && (\r\n              <FieldDescription>{description}</FieldDescription>\r\n            )}\r\n          </>\r\n        );\r\n        const control = children({\r\n          ...field,\r\n          id: field.name,\r\n          \"aria-invalid\": fieldState.invalid,\r\n        });\r\n        const errorElem = fieldState.invalid && (\r\n          <FieldError errors={[fieldState.error]} />\r\n        );\r\n\r\n        const descriptionElement =\r\n          isDescriptionAfter && description ? (\r\n            <FieldDescription>{description}</FieldDescription>\r\n          ) : null;\r\n\r\n        return (\r\n          <Field\r\n            data-invalid={fieldState.invalid}\r\n            orientation={horizontal ? \"horizontal\" : undefined}\r\n          >\r\n            {controlFirst ? (\r\n              <>\r\n                {control}\r\n                {descriptionElement}\r\n                <FieldContent>\r\n                  {labelElement}\r\n                  {errorElem}\r\n                </FieldContent>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {labelElement}\r\n                {control}\r\n                {descriptionElement}\r\n                {errorElem}\r\n              </>\r\n            )}\r\n          </Field>\r\n        );\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nexport const FormInput: FormControlFunc<\r\n  React.ComponentPropsWithoutRef<typeof Input>\r\n> = ({ placeholder, type, disabled, ...props }) => {\r\n  return (\r\n    <FormBase {...props}>\r\n      {(field) => (\r\n        <Input\r\n          {...field}\r\n          placeholder={placeholder}\r\n          type={type}\r\n          disabled={disabled}\r\n        />\r\n      )}\r\n    </FormBase>\r\n  );\r\n};\r\n\r\nexport const FormTextarea: FormControlFunc<\r\n  React.ComponentPropsWithoutRef<typeof Textarea>\r\n> = ({ placeholder, rows, disabled, ...props }) => {\r\n  return (\r\n    <FormBase {...props}>\r\n      {(field) => (\r\n        <Textarea\r\n          {...field}\r\n          placeholder={placeholder}\r\n          rows={rows}\r\n          disabled={disabled}\r\n        />\r\n      )}\r\n    </FormBase>\r\n  );\r\n};\r\n\r\nexport const FormSelect: FormControlFunc<\r\n  { children: ReactNode } & React.ComponentPropsWithoutRef<typeof SelectTrigger>\r\n> = ({ children, disabled, ...props }) => {\r\n  return (\r\n    <FormBase {...props}>\r\n      {({ onChange, onBlur, ...field }) => (\r\n        <Select {...field} onValueChange={onChange} disabled={disabled}>\r\n          <SelectTrigger\r\n            aria-invalid={field[\"aria-invalid\"]}\r\n            id={field.id}\r\n            onBlur={onBlur}\r\n            disabled={disabled}\r\n          >\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent>{children}</SelectContent>\r\n        </Select>\r\n      )}\r\n    </FormBase>\r\n  );\r\n};\r\n\r\nexport const FormCheckbox: FormControlFunc<\r\n  React.ComponentPropsWithoutRef<typeof Checkbox>\r\n> = ({ disabled, ...props }) => {\r\n  return (\r\n    <FormBase {...props} horizontal controlFirst>\r\n      {({ onChange, value, ...field }) => (\r\n        <Checkbox\r\n          {...field}\r\n          checked={value}\r\n          onCheckedChange={onChange}\r\n          disabled={disabled}\r\n        />\r\n      )}\r\n    </FormBase>\r\n  );\r\n};\r\n\r\nexport const FormSwitch: FormControlFunc<\r\n  React.ComponentPropsWithoutRef<typeof Switch>\r\n> = ({ disabled, ...props }) => {\r\n  return (\r\n    <FormBase {...props} horizontal controlFirst>\r\n      {({ onChange, value, ...field }) => (\r\n        <Switch\r\n          {...field}\r\n          checked={value}\r\n          onCheckedChange={onChange}\r\n          disabled={disabled}\r\n        />\r\n      )}\r\n    </FormBase>\r\n  );\r\n};\r\n",
      "type": "registry:ui",
      "target": "components/helisa/ui/form-field.tsx"
    }
  ]
}
