{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-field",
  "type": "registry:ui",
  "title": "Form Field",
  "description": "A form field wrapper component.",
  "dependencies": [
    "react-hook-form"
  ],
  "registryDependencies": [
    "label",
    "input",
    "textarea",
    "select",
    "switch",
    "checkbox",
    "field",
    "https://raw.githubusercontent.com/helisaapp/helisa-react-registry/refs/heads/main/public/r/required-mark.json"
  ],
  "files": [
    {
      "path": "registry/helisa/ui/form-field.tsx",
      "content": "import { Field, FieldContent, FieldDescription, FieldError, FieldLabel } from '@/components/ui/field';\nimport { ReactNode } from 'react';\nimport { Controller, ControllerProps, FieldPath, FieldValues } from 'react-hook-form';\nimport RequiredMark from './required-mark';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Switch } from '@/components/ui/switch';\n\n\ntype FormControlProps<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n> = {\n  name: TName;\n  label: ReactNode;\n  description?: ReactNode;\n  /**\n   * Indica si la descripción se muestra después del campo de entrada (Input, Select, etc.)\n   */\n  isDescriptionAfter?: boolean;\n\n  /** Indica si el campo es obligatorio, para mostrar la marca de requerido */\n  isRequired?: boolean;\n  control: ControllerProps<TFieldValues, TName, TTransformedValues>['control'];\n};\n\ntype FormBaseProps<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n> = FormControlProps<TFieldValues, TName, TTransformedValues> & {\n  horizontal?: boolean;\n  controlFirst?: boolean;\n  children: (\n    field: Parameters<ControllerProps<TFieldValues, TName, TTransformedValues>['render']>[0]['field'] & {\n      'aria-invalid': boolean;\n      id: string;\n    },\n  ) => ReactNode;\n};\n\ntype FormControlFunc<ExtraProps extends Record<string, unknown> = Record<never, never>> = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n>(\n  props: FormControlProps<TFieldValues, TName, TTransformedValues> & ExtraProps,\n) => ReactNode;\n\nexport function FormBase<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n>({\n  children,\n  control,\n  label,\n  name,\n  description,\n  isDescriptionAfter,\n  controlFirst,\n  horizontal,\n  isRequired,\n}: FormBaseProps<TFieldValues, TName, TTransformedValues>) {\n  return (\n    <Controller\n      control={control}\n      name={name}\n      render={({ field, fieldState }) => {\n        const labelElement = (\n          <>\n            <FieldLabel htmlFor={field.name}>\n              {label}\n              {isRequired && <RequiredMark />}\n            </FieldLabel>\n            {!isDescriptionAfter && description && <FieldDescription>{description}</FieldDescription>}\n          </>\n        );\n        const control = children({\n          ...field,\n          id: field.name,\n          'aria-invalid': fieldState.invalid,\n        });\n        const errorElem = fieldState.invalid && <FieldError errors={[fieldState.error]} />;\n\n        const descriptionElement =\n          isDescriptionAfter && description ? <FieldDescription>{description}</FieldDescription> : null;\n\n        return (\n          <Field data-invalid={fieldState.invalid} orientation={horizontal ? 'horizontal' : undefined}>\n            {controlFirst ? (\n              <>\n                {control}\n                {descriptionElement}\n                <FieldContent>\n                  {labelElement}\n                  {errorElem}\n                </FieldContent>\n              </>\n            ) : (\n              <>\n                <FieldContent>{labelElement}</FieldContent>\n                {control}\n                {descriptionElement}\n                {errorElem}\n              </>\n            )}\n          </Field>\n        );\n      }}\n    />\n  );\n}\n\nexport const FormInput: FormControlFunc = (props) => {\n  return <FormBase {...props}>{(field) => <Input {...field} />}</FormBase>;\n};\n\nexport const FormTextarea: FormControlFunc = (props) => {\n  return <FormBase {...props}>{(field) => <Textarea {...field} />}</FormBase>;\n};\n\nexport const FormSelect: FormControlFunc<{ children: ReactNode }> = ({ children, ...props }) => {\n  return (\n    <FormBase {...props}>\n      {({ onChange, onBlur, ...field }) => (\n        <Select {...field} onValueChange={onChange}>\n          <SelectTrigger aria-invalid={field['aria-invalid']} id={field.id} onBlur={onBlur}>\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>{children}</SelectContent>\n        </Select>\n      )}\n    </FormBase>\n  );\n};\n\nexport const FormCheckbox: FormControlFunc = (props) => {\n  return (\n    <FormBase {...props} horizontal controlFirst>\n      {({ onChange, value, ...field }) => <Checkbox {...field} checked={value} onCheckedChange={onChange} />}\n    </FormBase>\n  );\n};\n\nexport const FormSwitch: FormControlFunc = (props) => {\n  return (\n    <FormBase {...props} horizontal controlFirst>\n      {({ onChange, value, ...field }) => <Switch {...field} checked={value} onCheckedChange={onChange} />}\n    </FormBase>\n  );\n};\n",
      "type": "registry:ui",
      "target": "components/helisa/ui/form-field.tsx"
    }
  ]
}