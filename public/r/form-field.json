{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-field",
  "title": "Form Field",
  "description": "A component for form field layout and validation.",
  "dependencies": ["react-hook-form"],
  "registryDependencies": [
    "label",
    "input",
    "textarea",
    "select",
    "switch",
    "checkbox",
    "field",
    "https://raw.githubusercontent.com/helisaapp/helisa-react-registry/refs/heads/main/public/r/required-mark.json"
  ],
  "files": [
    {
      "path": "registry/helisa/ui/form-field.tsx",
      "content": "\"use client\";\n\nimport {\n  Field,\n  FieldContent,\n  FieldDescription,\n  FieldError,\n  FieldLabel,\n} from \"@/components/ui/field\";\nimport { ReactNode } from \"react\";\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n} from \"react-hook-form\";\nimport RequiredMark from \"./required-mark\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Switch } from \"@/components/ui/switch\";\n\ntype FormControlProps<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n> = {\n  name: TName;\n  label: ReactNode;\n  description?: ReactNode;\n  /**\n   * Indica si la descripción se muestra después del campo de entrada (Input, Select, etc.)\n   */\n  isDescriptionAfter?: boolean;\n\n  /** Indica si el campo es obligatorio, para mostrar la marca de requerido */\n  isRequired?: boolean;\n  control: ControllerProps<TFieldValues, TName, TTransformedValues>[\"control\"];\n};\n\ntype FormBaseProps<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n> = FormControlProps<TFieldValues, TName, TTransformedValues> & {\n  horizontal?: boolean;\n  controlFirst?: boolean;\n  children: (\n    field: Parameters<\n      ControllerProps<TFieldValues, TName, TTransformedValues>[\"render\"]\n    >[0][\"field\"] & {\n      \"aria-invalid\": boolean;\n      id: string;\n    },\n  ) => ReactNode;\n};\n\ntype FormControlFunc<\n  ExtraProps extends Record<string, unknown> = Record<never, never>,\n> = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n>(\n  props: FormControlProps<TFieldValues, TName, TTransformedValues> & ExtraProps,\n) => ReactNode;\n\nexport function FormBase<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n  TTransformedValues = TFieldValues,\n>({\n  children,\n  control,\n  label,\n  name,\n  description,\n  isDescriptionAfter,\n  controlFirst,\n  horizontal,\n  isRequired,\n}: FormBaseProps<TFieldValues, TName, TTransformedValues>) {\n  return (\n    <Controller\n      control={control}\n      name={name}\n      render={({ field, fieldState }) => {\n        const labelElement = (\n          <>\n            <FieldLabel htmlFor={field.name}>\n              {label}\n              {isRequired && <RequiredMark />}\n            </FieldLabel>\n            {!isDescriptionAfter && description && (\n              <FieldDescription>{description}</FieldDescription>\n            )}\n          </>\n        );\n        const control = children({\n          ...field,\n          id: field.name,\n          \"aria-invalid\": fieldState.invalid,\n        });\n        const errorElem = fieldState.invalid && (\n          <FieldError errors={[fieldState.error]} />\n        );\n\n        const descriptionElement =\n          isDescriptionAfter && description ? (\n            <FieldDescription>{description}</FieldDescription>\n          ) : null;\n\n        return (\n          <Field\n            data-invalid={fieldState.invalid}\n            orientation={horizontal ? \"horizontal\" : undefined}\n          >\n            {controlFirst ? (\n              <>\n                {control}\n                {descriptionElement}\n                <FieldContent>\n                  {labelElement}\n                  {errorElem}\n                </FieldContent>\n              </>\n            ) : (\n              <>\n                {labelElement}\n                {control}\n                {descriptionElement}\n                {errorElem}\n              </>\n            )}\n          </Field>\n        );\n      }}\n    />\n  );\n}\n\nexport const FormInput: FormControlFunc<\n  React.ComponentPropsWithoutRef<typeof Input>\n> = ({ placeholder, type, disabled, ...props }) => {\n  return (\n    <FormBase {...props}>\n      {(field) => (\n        <Input\n          {...field}\n          placeholder={placeholder}\n          type={type}\n          disabled={disabled}\n        />\n      )}\n    </FormBase>\n  );\n};\n\nexport const FormTextarea: FormControlFunc<\n  React.ComponentPropsWithoutRef<typeof Textarea>\n> = ({ placeholder, rows, disabled, ...props }) => {\n  return (\n    <FormBase {...props}>\n      {(field) => (\n        <Textarea\n          {...field}\n          placeholder={placeholder}\n          rows={rows}\n          disabled={disabled}\n        />\n      )}\n    </FormBase>\n  );\n};\n\nexport const FormSelect: FormControlFunc<\n  { children: ReactNode } & React.ComponentPropsWithoutRef<typeof SelectTrigger>\n> = ({ children, disabled, ...props }) => {\n  return (\n    <FormBase {...props}>\n      {({ onChange, onBlur, ...field }) => (\n        <Select {...field} onValueChange={onChange} disabled={disabled}>\n          <SelectTrigger\n            aria-invalid={field[\"aria-invalid\"]}\n            id={field.id}\n            onBlur={onBlur}\n            disabled={disabled}\n          >\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>{children}</SelectContent>\n        </Select>\n      )}\n    </FormBase>\n  );\n};\n\nexport const FormCheckbox: FormControlFunc<\n  React.ComponentPropsWithoutRef<typeof Checkbox>\n> = ({ disabled, ...props }) => {\n  return (\n    <FormBase {...props} horizontal controlFirst>\n      {({ onChange, value, ...field }) => (\n        <Checkbox\n          {...field}\n          checked={value}\n          onCheckedChange={onChange}\n          disabled={disabled}\n        />\n      )}\n    </FormBase>\n  );\n};\n\nexport const FormSwitch: FormControlFunc<\n  React.ComponentPropsWithoutRef<typeof Switch>\n> = ({ disabled, ...props }) => {\n  return (\n    <FormBase {...props} horizontal controlFirst>\n      {({ onChange, value, ...field }) => (\n        <Switch\n          {...field}\n          checked={value}\n          onCheckedChange={onChange}\n          disabled={disabled}\n        />\n      )}\n    </FormBase>\n  );\n};\n",
      "type": "registry:ui",
      "target": "components/helisa/ui/form-field.tsx"
    }
  ],
  "type": "registry:ui"
}
