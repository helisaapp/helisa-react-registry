{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "single-image-uploader",
  "type": "registry:component",
  "title": "Single Image Uploader",
  "description": "A component for uploading a single image file with preview and validation.",
  "registryDependencies": [
    "button",
    "https://raw.githubusercontent.com/helisaapp/helisa-react-registry/refs/heads/main/public/r/use-file-upload.json"
  ],
  "files": [
    {
      "path": "registry/helisa/components/upload-files/single-image-uploader.tsx",
      "content": "'use client';\n\nimport { AlertCircleIcon, ImageIcon, UploadIcon, XIcon } from \"lucide-react\"\n\nimport { FileMetadata, useFileUpload } from \"@/hooks/user-file-upload\"\nimport { Button } from \"@/components/ui/button\"\nimport { useEffect } from \"react\";\n\ninterface SingleImageUploaderProps {    \n    /**\n     * eg: \"image/png, image/jpeg\"\n     */\n    acceptedFormats?: string;\n    /**\n     * eg: [\".png\", \".jpg\", \".jpeg\"]\n     */\n    fileTypes?: string[];\n    maxSizeMB?: number;\n    onUploaded?: (file: File | FileMetadata | null) => void;\n}\n\nexport default function SingleImageUploader({  \n  acceptedFormats,\n  maxSizeMB,\n  fileTypes,\n  onUploaded,\n}: SingleImageUploaderProps) {\n  const maxSizeMBProp = maxSizeMB || 2\n  const maxSize = maxSizeMBProp * 1024 * 1024 // 2MB default\n  const displayFileTypes = fileTypes && fileTypes.length > 0 ? fileTypes.join(\", \") : \"PNG, JPG, JPEG, GIF, SVG\"\n\n  const [\n    { files, isDragging, errors },\n    {\n      handleDragEnter,\n      handleDragLeave,\n      handleDragOver,\n      handleDrop,\n      openFileDialog,\n      removeFile,\n      getInputProps,\n    },\n  ] = useFileUpload({\n    accept: acceptedFormats || \"image/svg+xml,image/png,image/jpeg,image/jpg,image/gif\",\n    maxSize,\n  })\n  const previewUrl = files[0]?.preview || null\n  const fileName = files[0]?.file.name || null\n\n  const handleFileUpload = (file: File | FileMetadata | null) => {\n    // You can handle the uploaded file here    \n    if (onUploaded) {\n      onUploaded(file)\n    }\n  }\n\n  useEffect(() => {\n    if (files.length > 0) {\n      handleFileUpload(files[0]?.file || null)\n    } else {\n      handleFileUpload(null)\n    }\n  }, [files])\n\n  return (\n    <div className=\"flex flex-col gap-2\">\n      <div className=\"relative\">\n        {/* Drop area */}\n        <div\n          onDragEnter={handleDragEnter}\n          onDragLeave={handleDragLeave}\n          onDragOver={handleDragOver}\n          onDrop={handleDrop}\n          data-dragging={isDragging || undefined}\n          className=\"relative flex min-h-52 flex-col items-center justify-center overflow-hidden rounded-xl border border-dashed border-input p-4 transition-colors has-[input:focus]:border-ring has-[input:focus]:ring-[3px] has-[input:focus]:ring-ring/50 data-[dragging=true]:bg-accent/50\"\n        >\n          <input\n            {...getInputProps()}\n            className=\"sr-only\"\n            aria-label=\"Upload image file\"\n          />\n          {previewUrl ? (\n            <div className=\"absolute inset-0 flex items-center justify-center p-4\">\n              <img\n                src={previewUrl}\n                alt={files[0]?.file?.name || \"Imagen cargada\"}\n                className=\"mx-auto max-h-full rounded object-contain\"\n              />\n            </div>\n          ) : (\n            <div className=\"flex flex-col items-center justify-center px-4 py-3 text-center\">\n              <div\n                className=\"mb-2 flex size-11 shrink-0 items-center justify-center rounded-full border bg-background\"\n                aria-hidden=\"true\"\n              >\n                <ImageIcon className=\"size-4 opacity-60\" />\n              </div>\n              <p className=\"mb-1.5 text-sm font-medium\">Suelta tu imagen aqu√≠</p>\n              <p className=\"text-xs text-muted-foreground\">\n                {displayFileTypes} (max. {maxSizeMB}MB)\n              </p>\n              <Button\n                variant=\"outline\"\n                className=\"mt-4\"\n                onClick={openFileDialog}\n              >\n                <UploadIcon\n                  className=\"-ms-1 size-4 opacity-60\"\n                  aria-hidden=\"true\"\n                />\n                Selecciona una imagen\n              </Button>\n            </div>\n          )}\n        </div>\n\n        {previewUrl && (\n          <div className=\"absolute top-4 right-4\">\n            <button\n              type=\"button\"\n              className=\"z-50 flex size-8 cursor-pointer items-center justify-center rounded-full bg-black/60 text-white transition-[color,box-shadow] outline-none hover:bg-black/80 focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50\"\n              onClick={() => removeFile(files[0]?.id)}\n              aria-label=\"Remove image\"\n            >\n              <XIcon className=\"size-4\" aria-hidden=\"true\" />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {errors.length > 0 && (\n        <div\n          className=\"flex items-center gap-1 text-xs text-destructive\"\n          role=\"alert\"\n        >\n          <AlertCircleIcon className=\"size-3 shrink-0\" />\n          <span>{errors[0]}</span>\n        </div>\n      )}      \n    </div>\n  )\n}\n\nexport const UseUploaderImageDemo = () => {\n\n}",
      "type": "registry:component",
      "target": "components/helisa/components/upload-files/single-image-uploader.tsx"
    }
  ]
}
